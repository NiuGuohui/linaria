# åŸºç¡€

## åŸºç¡€è¯­æ³•

Linaria ä½¿ç”¨ [æ ‡ç­¾æ¨¡æ¿å­—ç¬¦ä¸²è¯­æ³•](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Tagged_templates) æ¥å®šä¹‰æ ·å¼ã€‚ è¿™æ˜¯æœ€æ–°ç‰ˆæœ¬çš„ JavaScript ä¸­å¼•å…¥çš„ä¸€ç§æ–°è¯­æ³•ã€‚

æ¨¡æ¿å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªç”¨åæ–œçº¿ï¼ˆ`` ` ``ï¼‰è€Œä¸æ˜¯å¼•å·åŒ…è£¹çš„å­—ç¬¦ä¸²ã€‚åœ¨é‡Œé¢ä½ å¯ä»¥ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²å’Œå­—ç¬¦ä¸²æ’å€¼ã€‚

```js
const message = `
This is a template literal.
This is an interpolation: ${answer}.
`;
```

æ ‡è®°æ¨¡æ¿å­—ç¬¦ä¸²æŒ‡çš„æ˜¯ä¸€ä¸ªå¼€å¤´æœ‰æ ‡è®°å‡½æ•°çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼š

```js
const message = someTag`This is a tagged template literal`;
```

æ ‡è®°å‡½æ•°æ˜¯æ™®é€šçš„JavaScriptå‡½æ•°ï¼Œå®ƒæ¥æ”¶æ¨¡æ¿å­—ç¬¦ä¸²å’Œå®ƒçš„æ’å€¼ï¼Œå¹¶å¯ä»¥åœ¨è¿”å›ä¸€ä¸ªå€¼ä¹‹å‰æ‰§è¡Œæ“ä½œã€‚

Linariaä¸ºæ ·å¼è®¾è®¡æä¾›äº†ä¸¤ä¸ªæ ‡è®°å‡½æ•°ï¼Œ`css`å’Œ`styled`ã€‚å®ƒä»¬éƒ½æ”¯æŒç›¸åŒçš„ç‰¹æ€§ï¼Œ`styled`æ ‡è®°å‡½æ•°è¿˜æ”¯æŒåŸºäºpropçš„æ ·å¼ã€‚

è¿™äº›æ ‡è®°å‡½æ•°å¯ä»¥è®©ä½ åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸Šç”¨CSSè¯­æ³•ç¼–å†™æ ·å¼ã€‚

### `css` æ ‡è®°å‡½æ•°

`css`æ ‡è®°å‡½æ•°å…è®¸ä½ åˆ›å»ºä¸€ä¸ªç®€å•çš„ç±»åï¼š

```js
import { css } from '@linaria/core';

// Create a class name
const title = css`
  font-size: 24px;
  font-weight: bold;
`;

function Heading() {
  // Pass it to a component
  return <h1 className={title}>This is a title</h1>;
}
```

è¿™é‡Œ `title` å˜é‡çš„å€¼å°†æ˜¯ä¸€ä¸ªå”¯ä¸€çš„ç±»åï¼Œä½ å¯ä»¥å°†å…¶ä¼ é€’ç»™ `className` å±æ€§ã€‚è¿™æ®µä»£ç ç›¸å½“äºä¸‹é¢çš„ CSS å’Œ JavaScriptã€‚

CSS:

```css
.title {
  font-size: 24px;
  font-weight: bold;
}
```

JavaScript:

```js
function Heading() {
  return <h1 className="title">This is a title</h1>;
}
```

### `styled` æ ‡è®°å‡½æ•°

`styled` æ ‡è®°å‡½æ•°å…è®¸ä½ åˆ›å»ºä¸€ä¸ªå·²ç»åº”ç”¨äº†ä¸€äº›æ ·å¼çš„ React ç»„ä»¶ã€‚

`styled` åéœ€è¦è·Ÿä¸€ä¸ªè¦ä½¿ç”¨çš„ HTML æ ‡ç­¾çš„åç§°ï¼Œä¾‹å¦‚`styled.div`ã€`styled.a`ã€`styled.button`ã€`styled.h3` ç­‰ã€‚

```js
import { styled } from '@linaria/react';

// Create a styled component
const Title = styled.h1`
  font-size: 24px;
  font-weight: bold;
`;

function Heading() {
  // Use the styled component
  return <Title>This is a title</Title>;
}
```

è¿™å‡å°‘äº†ä½ åœ¨æ‰‹åŠ¨åˆ›å»ºç±»åå¹¶å°†å…¶åº”ç”¨äºæ ‡ç­¾æ—¶ç¼–å†™çš„å¤§é‡æ ·æ¿ä»£ç ã€‚è¿™æ®µä»£ç ç›¸å½“äºä¸‹é¢çš„ CSS å’Œ JavaScriptã€‚

CSS:

```css
.title {
  font-size: 24px;
  font-weight: bold;
}
```

JavaScript:

```js
function Title(props) {
  return <h1 {...props} className="title" />;
}

function Heading() {
  return <Title>This is a title</Title>;
}
```

é™¤äº†å‡å°‘æ ·æ¿ä»£ç ä¹‹å¤–ï¼Œè¿™è¿˜å¯ä»¥æ›´è½»æ¾åœ°å®ç°åŸºäºpropçš„æ ·å¼ï¼Œè¿™å°†åœ¨æœ¬æŒ‡å—åé¢ä»‹ç»ã€‚

### åµŒå¥—ï¼Œä¼ªç±»å’Œä¼ªå…ƒç´ 

å€ŸåŠ© [stylis](https:github.comthysultanstylis.js)ï¼Œä½ å¯ä»¥åµŒå¥—ç±»ä¼¼äº Sass çš„é€‰æ‹©å™¨ã€ä¼ªå…ƒç´ å’Œä¼ªé€‰æ‹©å™¨ã€‚

ä¾‹å¦‚ï¼Œè¦æ›´æ”¹æ‚¬åœæŒ‰é’®çš„é¢œè‰²ï¼Œä½ å°†ç¼–å†™å¦‚ä¸‹å†…å®¹ï¼š

```js
const Button = styled.button`
  color: black;

  &:hover {
    color: blue;
  }
`;
```

`&` çš„å€¼æ˜¯æŒ‡ç±»åã€‚æ­¤ä»£ç ç­‰æ•ˆäºä»¥ä¸‹ CSSï¼š

```css
.button {
  color: black;
}

.button:hover {
  color: blue;
}
```

ä½ å¯ä»¥åµŒå¥—ä¼ªå…ƒç´ ä»¥åŠå…¶ä»–é€‰æ‹©å™¨ï¼š

```js
const Thing = styled.div`
  color: black;

  &::after {
    /* .thing::after */
    content: 'ğŸŒŸ';
  }

  h3 {
    /* .thing h3 */
    color: tomato;
  }

  .code {
    /* .thing .code */
    color: #555;
  }

  & + & {
    /* .thing + .thing */
    background: yellow;
  }

  &.bordered {
    /* .thing.bordered */
    border: 1px solid black;
  }

  .parent & {
    /* .parent .thing */
    color: blue;
  }
`;
```

ä½ è¿˜å¯ä»¥åµŒå¥—åª’ä»‹æŸ¥è¯¢ï¼š

```js
const Thing = styled.div`
  color: black;

  @media (min-width: 200px) {
    color: blue;
  }
`;
```

è¿™ç­‰æ•ˆäºä»¥ä¸‹ CSSï¼š

```css
.thing {
  color: black;
}

@media (min-width: 200px) {
  .thing {
    color: blue;
  }
}
```

### Keyframe åŠ¨ç”»

ä½ å¯ä»¥åœ¨æ¨¡æ¿å­—ç¬¦ä¸²å†…ç¼–å†™keyframeåŠ¨ç”»ï¼ˆå…³é”®å¸§åŠ¨ç”»ï¼‰å£°æ˜ï¼š

```js
const Box = styled.div`
  height: 200px;
  width: 200px;
  background-color: tomato;
  animation: spin 2s linear infinite;

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }

    to {
      transform: rotate(360deg);
    }
  }
`;
```

è¿™é‡Œ `spin` å°†è¢«ä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸²æ›¿æ¢ï¼Œä»¥å°†åŠ¨ç”»çš„ä½œç”¨èŒƒå›´é™å®šä¸ºç±»åã€‚

## æ’å€¼

ä¸æ™®é€šçš„æ¨¡æ¿å­—ç¬¦ä¸²ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨å¸¦æœ‰ `css` æˆ– `styled` æ ‡è®°çš„æ¨¡æ¿å­—ç¬¦ä¸²ä¸­æ’å…¥å…¶ä»–è¡¨è¾¾å¼ã€‚

å¦‚æœä½ å°è¯•æ’å…¥æ— æ•ˆçš„å€¼ï¼Œä½ å°†åœ¨æ„å»ºæ—¶æ”¶åˆ°é”™è¯¯æ¶ˆæ¯ã€‚

### æ’å€¼åŸºæœ¬ç”¨æ³•

ä½ å¯ä»¥æ’å…¥åœ¨åŒä¸€æ–‡ä»¶ä¸­å£°æ˜çš„å˜é‡ä»¥åŠå¯¼å…¥çš„å˜é‡ï¼š

```js
const fontSize = 16;

const Title = styled.h1`
  font-size: ${fontSize}px;
`;
```

åœ¨è¿™é‡Œï¼Œ`fontSize` å˜é‡å°†åœ¨æ„å»ºæ—¶è¯„ä¼°å¹¶æ’å…¥åˆ°ç”Ÿæˆçš„ CSS ä¸­ã€‚

ä½ è¿˜å¯ä»¥åœ¨æ’å€¼æ—¶è°ƒç”¨å‡½æ•°ï¼š

```js
const Button = styled.button`
  background-color: ${colors.primary};

  &:hover {
    background-color: ${darken(0.2, colors.primary)};
  }
`;
```

### å¯¹è±¡æ’å€¼

ä½ è¿˜å¯ä»¥æ’å…¥å¯¹è±¡æ ·å¼ã€‚å®ƒä¼šåœ¨æ’å…¥æ ·å¼è¡¨ä¹‹å‰è¢«è½¬æ¢ä¸º CSS å­—ç¬¦ä¸²ï¼š

```js
const cover = {
  position: 'absolute',
  top: 0,
  right: 0,
  bottom: 0,
  left: 0,
  opacity: 1,
  minHeight: 360,

  '@media (min-width: 200px)': {
    minHeight: 480,
  },
};

const Title = styled.h1`
  font-size: 24px;

  ${cover};
`;
```

è¿™ç­‰æ•ˆäºä»¥ä¸‹ CSSï¼š

```js
const Title = styled.h1`
  font-size: 24px;

  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  opacity: 1;
  min-height: 360px;

  @media (min-width: 200px): {
    min-height: 480px;
  }
`;
```

æ’å€¼å¯¹è±¡å¯ä»¥å…·æœ‰åµŒå¥—é€‰æ‹©å™¨ã€åª’ä»‹æŸ¥è¯¢ã€ä¼ªç±»å’Œä¼ªå…ƒç´ ã€‚é™¤éæŒ‡å®šï¼Œå¦åˆ™éœ€è¦å•ä½çš„æ•°å€¼ï¼ˆä¾‹å¦‚ä¸Šé¢ç¤ºä¾‹ä¸­çš„`minHeight`ï¼‰å°†é™„åŠ `px`ã€‚

### åŸºäºpropçš„æ ·å¼

åœ¨ä½¿ç”¨ `styled` è¯­æ³•ç¼–å†™ React ç»„ä»¶æ—¶ï¼Œä½ å¯ä»¥æ ¹æ®ç»„ä»¶çš„ props ç¼–å†™æ ·å¼ã€‚è¿™äº›å€¼å°†ä½¿ç”¨ [CSS å˜é‡](https:developer.mozilla.orgen-USdocsWebCSSUsing_CSS_variables)ï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ›´æ”¹ã€‚

å¯¹äºåŸºäºåŠ¨æ€propçš„æ ·å¼ï¼Œå°†å‡½æ•°ä¼ é€’ç»™æ’å€¼ï¼š

```js
const Title = styled.h1`
  color: ${props => (props.primary ? 'tomato' : 'black')};
`;
```

è¯¥å‡½æ•°å°†åœ¨æ¸²æŸ“æ—¶ä»¥ç»„ä»¶çš„ props ä½œä¸ºå‚æ•°è°ƒç”¨ã€‚åœ¨è¿™é‡Œï¼Œæ¯å½“ `primary` å±æ€§çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ ‡é¢˜çš„é¢œè‰²éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ã€‚

### å¼•ç”¨å¦ä¸€ä¸ªç»„ä»¶æˆ–ç±»å

ä½ å¯ä»¥æ’å…¥styledç»„ä»¶ï¼ˆè¿™é‡Œçš„ç»„ä»¶æ˜¯æŒ‡Linariaç”Ÿæˆçš„æ ·å¼ç»„ä»¶ï¼‰æˆ–ç±»åæ¥å¼•ç”¨å®ƒã€‚ä¾‹å¦‚ï¼š

```js
const title = css`
  font-size: 24px;
  color: black;
`;

const Paragraph = styled.p`
  font-size: 16px;
  color: #555;
`;

const Article = styled.article`
  /* å¼•ç”¨ç±»åæ—¶ï¼Œåœ¨å‰é¢åŠ ä¸Šä¸€ä¸ªç‚¹ (.) */
  .${title} {
    font-size: 36px;
  }

  /* å¼•ç”¨ç»„ä»¶æ—¶ï¼Œå°†å…¶æ’å…¥ä¸ºé€‰æ‹©å™¨ */
  ${Paragraph} {
    font-size: 14px;
    margin: 16px;
  }
`;
```

## æ ·å¼è¦†ç›–

å¦‚æœä½ æƒ³è¦†ç›–ä¹‹å‰å®šä¹‰çš„styledç»„ä»¶ä¸Šçš„å‡ ä¸ªæ ·å¼ï¼Œå¯ä»¥é€šè¿‡å°†å…¶åŒ…è£…åœ¨ `styled(..)` æ ‡è®°ä¸­æ¥å®ç°ï¼š

```js
const Button = styled.button`
  font-size: 14px;
  background-color: tomato;
  padding: 8px;
  box-shadow: 0 0.5px 0.3px rgba(0, 0, 0, 0.1);
`;

const LargeButton = styled(Button)`
  font-size: 18px;
  padding: 16px;
`;
```

åœ¨è¿™é‡Œï¼Œå½“ä½ ä½¿ç”¨ `LargeButton` æ—¶ï¼Œå®ƒå°†å…·æœ‰ä¸ `Button` ç›¸åŒçš„æ ·å¼ï¼Œé™¤äº†æˆ‘ä»¬è¦†ç›–çš„ `font-size` å’Œ `padding`ã€‚

## æ ·å¼åŒ–è‡ªå®šä¹‰ç»„ä»¶

ä½ å¯ä»¥ä½¿ç”¨ `styled(..)` æ ‡è®°æ¥è®¾ç½®ä»»ä½•ç»„ä»¶çš„æ ·å¼ï¼Œåªè¦å®ƒä»¬æ¥å— `className` å’Œ `style` å±æ€§ï¼š

```js
function CoolComponent({ className, style, ...rest }) {
  return (
    <div className={className} style={style}>
      {...}
    </div>
  );
}

const StyledCoolComponent = styled(CoolComponent)`
  background-color: tomato;
`;
```

`style` å±æ€§æ˜¯åº”ç”¨ CSS å˜é‡æ‰€å¿…éœ€çš„ã€‚å¦‚æœä½ ä½¿ç”¨çš„ç»„ä»¶åº“ä¸æ”¯æŒä¼ é€’ `style` å±æ€§ï¼Œåˆ™å¯ä»¥å°†å…¶åŒ…è£…åœ¨ `div` ï¼ˆæˆ–ä»»ä½•å…¶ä»–æœ‰æ„ä¹‰çš„æ ‡ç­¾ï¼‰ä¸­ä»¥åº”ç”¨å®ƒï¼š

```js
import { Card } from 'some-library';

function CustomCard({ className, style, ...rest }) {
  return (
    <div style={style}>
      <Card className={className} {...rest} />
    </div>
  );
}

const StyledCustomCard = styled(CustomCard)`
  margin: 16px;
  height: ${props => props.height}px;
`;
```

å¦‚æœä½ æƒ³ä½¿ç”¨ä¸ºç»„ä»¶ç”Ÿæˆçš„ linaria ç±»åï¼Œä½ å¯ä»¥ä» `className` ä¸­è·å–æœ€åä¸€é¡¹å³å¯ï¼š

```js
function CoolComponent({ className, style, variant, ...rest }) {
  const allClasses = className.split(' ');
  const linariaClassName = allClasses[allClasses.length - 1];

  const classes = cx(
    className,
    variant === 'primary' && `${linariaClassName}--primary`
  );

  return (
    <div className={classes} style={style}>
      {...}
    </div>
  );
}

const StyledCoolComponent = styled(CoolComponent)`
  background-color: tomato;

  &--primary {
    background-color: yellow;
  }
`;
```

## æ·»åŠ å…¨å±€æ ·å¼

é€šå¸¸ï¼Œæ ·å¼çš„èŒƒå›´ä»…é™äºç‰¹å®šç»„ä»¶ã€‚ä½†æœ‰æ—¶ä½ å¯èƒ½éœ€è¦ç¼–å†™ä¸€äº›å…¨å±€æ ·å¼ï¼Œä¾‹å¦‚ï¼Œè§„èŒƒæµè§ˆå™¨ä¸ä¸€è‡´ã€å®šä¹‰å­—ä½“ç³»åˆ—ç­‰ã€‚

ä½ å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œæ¥ç”Ÿæˆæ— èŒƒå›´çš„å…¨å±€æ ·å¼ï¼š

```js
export const globals = css`
  :global() {
    html {
      box-sizing: border-box;
    }

    *,
    *:before,
    *:after {
      box-sizing: inherit;
    }

    @font-face {
      font-family: 'MaterialIcons';
      src: url(../assets/fonts/MaterialIcons.ttf) format('truetype');
    }
  }
`;
```

åœ¨å…¨å±€æ ·å¼ä¸­ä¸å¯ä»¥ä½¿ç”¨åŸºäºåŠ¨æ€propçš„æ ·å¼ã€‚
